# 禁止 S3 睡眠

## 描述

- 某些机器存在 **睡眠失败** 问题，主要表现为：机器一旦睡眠就无法被唤醒，呈现死机状态，只能强制关机。**睡眠失败** 本质是机器一直停滞在睡眠过程，始终没有睡眠成功。
- 新的电脑引入了**「智能电脑」** 概念，就是所谓的AOAC功能。AOAC 是Intel提出的一项新技术，旨在电脑在睡眠或者休眠模式下仍然保持网络连接及资料传输。由于 AOAC 和 S3 本身相矛盾，采用了 AOAC 功能的机器不具有 S3 睡眠功能，如Lenovo PRO13。然而，这样的机器的ACPI依然保留了 S3 方法，从而导致MAC系统一旦进入 S3 睡眠就会 **睡眠失败** 。
- 通过 **禁止`S3`睡眠** 方法可以解决上述 **睡眠失败** 问题。 **禁止`S3`睡眠** 后机器将不再睡眠。
- 下列情况不属于本文所描述的 **睡眠失败** 
  - 机器能够正常睡眠 **「呼吸灯闪烁」**，但刚刚睡眠成功就立即醒来
  - 机器能够正常睡眠 **「呼吸灯闪烁」**，但无法被唤醒

## 禁止 S3 睡眠补丁

- ACPI 规范 定义了 `S3` 方法，通过二进制更名使其定义失效可以 **禁止`S3`睡眠**。有关 `S3` 方面内容参见《ACPI 规范》。

- 更名：`_S3` to `XS3`
  
  ```Text
  Find:     5F53335F
  Replace:  5853335F
  ```
  
- ***SSDT-S3-disable***

  ```Swift
  If (_OSI ("Darwin"))
  {
      /* Empty */
  }
  Else
  {
      Name (_S3, Package (0x04)
      {
          0x05,
          Zero,
          Zero,
          Zero
      })
  }
  ```
